<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø¥Ù„Ù‰ Ø¬ÙŠØª Ù‡Ø§Ø¨</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 20px; background: #f4f4f4; }
        .card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); display: inline-block; }
        input { margin: 10px 0; }
        #linkArea { margin-top: 20px; color: blue; word-break: break-all; }
    </style>
</head>
<body>

<div class="card">
    <h2>Ø±ÙØ¹ (ØµÙˆØ±ØŒ ÙÙŠØ¯ÙŠÙˆØŒ ØµÙˆØª) Ø¥Ù„Ù‰ GitHub</h2>
    <input type="file" id="fileInput" accept="image/*,video/*,audio/*">
    <br>
    <button onclick="uploadFile()">Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø¢Ù†</button>
    
    <div id="status"></div>
    <div id="linkArea"></div>
</div>

<script>
    // ğŸ›‘ Ø¶Ø¹ Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù‡Ù†Ø§ (Ø¨Ø¹Ø¯ Ø­Ø°ÙÙ‡ ÙˆØ¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ø­Ø¯ Ø¬Ø¯ÙŠØ¯)
    const TOKEN = "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"; 
    
    
    const USER = "elgoharymd";
    const REPO = "my-data";

    async function uploadFile() {
        const fileInput = document.getElementById('fileInput');
        const status = document.getElementById('status');
        const linkArea = document.getElementById('linkArea');

        if (fileInput.files.length === 0) {
            alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ø®ØªØ± Ù…Ù„ÙØ§Ù‹ Ø£ÙˆÙ„Ø§Ù‹");
            return;
        }

        const file = fileInput.files[0];
        const fileName = `${Date.now()}-${file.name}`; // Ø§Ø³Ù… ÙØ±ÙŠØ¯ Ù„Ù„Ù…Ù„Ù Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙˆÙ‚Øª
        const reader = new FileReader();

        status.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ù„Ø±ÙØ¹...";

        reader.onload = async function () {
            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø¥Ù„Ù‰ Ø¨ØµÙŠØºØ© Base64 Ù„ÙŠÙ‚Ø¨Ù„Ù‡ GitHub
            const base64Content = reader.result.split(',')[1];

            const url = `https://api.github.com/repos/${USER}/${REPO}/contents/uploads/${fileName}`;

            try {
                const response = await fetch(url, {
                    method: "PUT",
                    headers: {
                        "Authorization": `token ${TOKEN}`,
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        message: `Ø±ÙØ¹ Ù…Ù„Ù: ${fileName}`,
                        content: base64Content
                    })
                });

                if (response.ok) {
                    status.innerText = "âœ… ØªÙ… Ø§Ù„Ø±ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­!";
                    // Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ø¨Ø§Ø´Ø± (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… jsDelivr Ù„ÙŠØ¹Ù…Ù„ ÙƒØ±ÙˆØ§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø±Ø©)
                    const downloadUrl = `https://cdn.jsdelivr.net/gh/${USER}/${REPO}/uploads/${fileName}`;
                    linkArea.innerHTML = `
                        <p>Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù‚Ø§Ø¨Ù„ Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ©:</p>
                        <a href="${downloadUrl}" target="_blank">${downloadUrl}</a>
                    `;
                } else {
                    status.innerText = "âŒ ÙØ´Ù„ Ø§Ù„Ø±ÙØ¹. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª.";
                }
            } catch (error) {
                status.innerText = "âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„.";
            }
        };

        reader.readAsDataURL(file);
    }
</script>

</body>
</html>